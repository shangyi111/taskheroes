@if (service$ | async; as service) {
<div class="service-details-container">
  <button mat-button class="back-to-search-link" (click)="goBackToSearch()">
    <mat-icon>arrow_back</mat-icon>
    Back to Search Results
  </button>

  <mat-card class="combined-booking-card">
    <div class="card-content-wrapper">
      
      <div class="service-info-column">
        <div class="header-section">
          <img class="business-avatar" [src]="service.profilePicture" alt="Profile">
          <div class="header-text">
            <h1 class="business-name">{{ service.businessName }}</h1>
            <div class="badge-row">
              <span class="category-tag">{{ service.category }}</span>
              @if (averageRating$ | async; as avg) {
                <div class="mini-rating">
                  <mat-icon>star</mat-icon>
                  <strong>{{ avg | number:'1.1-1' }}</strong>
                  <span class="total-count">({{ reviewCount$ | async }})</span>
                </div>
              }
            </div>
          </div>
        </div>

        <div class="content-block">
          <h3>About the Service</h3>
          <p class="description">{{ service.description }}</p>
        </div>

        <div class="content-block price-highlight">
          <div class="price-pill">
            <mat-icon>payments</mat-icon>
            <div class="price-details">
              <span class="label">Base Hourly Rate</span>
              <span class="amount">{{ service.hourlyRate | currency }}</span>
            </div>
          </div>
        </div>

        <div class="content-block contact-section">
          <div class="contact-row">
            <mat-icon>place</mat-icon>
            <span>{{ service.businessAddress }}</span>
          </div>
          <div class="contact-row">
            <mat-icon>call</mat-icon>
            <span>{{ service.phoneNumber }}</span>
          </div>
        </div>
      </div>

      <div class="calendar-booking-column">
        <div class="booking-header">
          <h2>Select Availability & Book</h2>
          <p>Choose a date to see available time slots</p>
        </div>
        <div class="calendar-card">
          <seeker-calendar
            [service]="service"
            [user]="user!"
            (bookRequest)="handleBookingSubmission($event)">
          </seeker-calendar>
        </div>
      </div>

    </div>
  </mat-card>

  <app-service-reviews [serviceId]="service.id"></app-service-reviews>
</div>
}